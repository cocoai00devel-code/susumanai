<!-- ５代目 -->


<svg width="800" height="800" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient id="rainbow-fill" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:red" /><stop offset="16.6%" style="stop-color:orange" /><stop offset="33.2%" style="stop-color:yellow" /><stop offset="49.8%" style="stop-color:green" /><stop offset="66.4%" style="stop-color:blue" /><stop offset="83.0%" style="stop-color:indigo" /><stop offset="100%" style="stop-color:violet" /><animateTransform attributeName="gradientTransform" type="translate" values="1 9; -1.9 -1" dur="9.8s" repeatCount="indefinite"/></linearGradient>

        <linearGradient id="rainbow-nose" x1="0%" y1="0%" x2="100%" y2="0%"><stop id="nose-stop1" offset="0%" stop-color="red" /><stop id="nose-stop2" offset="100%" stop-color="orange" /><animateTransform attributeName="gradientTransform" type="translate" values="1 7; -0.9 1" dur="9s" repeatCount="indefinite"/></linearGradient>

        <linearGradient id="rainbow-flow" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="red" /><stop offset="14.28%" stop-color="orange" /><stop offset="28.56%" stop-color="yellow" /><stop offset="42.84%" stop-color="green" /><stop offset="57.12%" stop-color="blue" /><stop offset="71.4%" stop-color="indigo" /><stop offset="85.68%" stop-color="violet" /><stop offset="100%" stop-color="red" /> <animateTransform attributeName="gradientTransform" type="translate" values="1 7; -0.8 1" dur="8s" repeatCount="indefinite"/></linearGradient>
        
        <radialGradient id="blue-ellipse-bg" cx="50%" cy="50%" r="50%" fx="40%" fy="30%" gradientUnits="objectBoundingBox"><stop offset="0%" stop-color="#ADD8E6" /><stop offset="50%" stop-color="#4682B4" /><stop offset="100%" stop-color="#191970" /></radialGradient>
    </defs>

    <style>
        
        /* 1. 目の点滅 */
        @keyframes blink {
            0%, 95%, 100% { ry: 12px; }
            97% { ry: 0.1px; } 
        }
        
        #eye-left {
            animation: blink 3s infinite steps(1); 
            transform-origin: 245px 52px; 
            /* 追尾の滑らかさ設定 */
            transition: transform 0.15s ease-out; 
        }
        #eye-right {
            animation: blink 3s infinite steps(1); 
            transform-origin: 315px 52px; 
            /* 追尾の滑らかさ設定 */
            transition: transform 0.15s ease-out; 
        }
        
    </style>
    <!-- <svg width="800" height="800" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">

    <defs>
        <radialGradient id="blue-ellipse-bg" 
                        cx="50%" cy="50%" r="50%" 
                        fx="40%" fy="30%" 
                        gradientUnits="objectBoundingBox">
            
            <stop offset="0%" stop-color="#ADD8E6" /> 
            <stop offset="50%" stop-color="#4682B4" /> 
            <stop offset="100%" stop-color="#191970" /> 
        </radialGradient>
    </defs> -->

    <rect x="0" y="0" width="100%" height="100%" 
          fill="url(#blue-ellipse-bg)" />


    <path
        d="M 50 200 A 250 250 0 0 1 550 200"
        fill="none"
        stroke="url(#rainbow-flow)"
        stroke-width="5"
        stroke-linecap="round"
    />

    <ellipse cx="245" cy="52" rx="20" ry="25" fill="white" stroke="url(#rainbow-fill)" stroke-width="2"/>
    <ellipse cx="315" cy="52" rx="20" ry="25" fill="white" stroke="url(#rainbow-fill)" stroke-width="2"/>

    <ellipse id="eye-left" class="iris-left" cx="245" cy="52" rx="5" ry="12" fill="url(#rainbow-fill)" stroke="url(#rainbow-flow)" stroke-width="1.5"/>
    <ellipse id="eye-right" class="iris-right" cx="315" cy="52" rx="5" ry="12" fill="url(#rainbow-fill)" stroke="url(#rainbow-flow)" stroke-width="1.5"/>
    
    <line id="rain-line1" x1="30" y1="80" x2="180" y2="110" stroke="url(#rainbow-fill)" stroke-width="3" />
    <line id="rain-line3" x1="30" y1="180" x2="180" y2="150" stroke="url(#rainbow-fill)" stroke-width="3"/> 
    <line id="rain-line4" x1="340" y1="110" x2="503" y2="80" stroke="url(#rainbow-fill)" stroke-width="3" />
    <line id="rain-line6" x1="340" y1="150" x2="520" y2="180" stroke="url(#rainbow-fill)" stroke-width="3" />
    
    <circle id="nose" cx="280" cy="85" r="14" fill="url(#rainbow-nose)" stroke="url(#rainbow-fill2)" stroke-width="2.5" />

    <text x="105" y="82" font-family="Arial, sans-serif" font-size="46" font-weight="1.5" fill="url(#rainbow-flow)" >
    K  S -      
    </text>
    <text x="215" y="98" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-flow)" transform="rotate(0 30 50)"> 
    9      
    </text>
    <text x="290" y="94" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-flow)" >
    0      
    </text>
    <text x="360" y="92" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-flow)" >
    3    
    </text>
    
    <line id="rain-line7" x1="280" y1="100" x2="280" y2="150" stroke="red" stroke-width="3" />
    <line id="rain-line5" x1="340" y1="130" x2="520" y2="130" stroke="orange" stroke-width="3" />
    <line id="rain-line2" x1="30" y1="130" x2="180" y2="130" stroke="orange" stroke-width="3"/>
　　<script type="text/ecmascript">
        <![CDATA[
        
        document.addEventListener("DOMContentLoaded", () => {
        
            // - - 1. 定数と要素の取得 - - 
            
            const colors = [
                "red", "orange", "yellow",
                "green", "blue", "indigo", "violet"
            ];

            const eyeLeft = document.getElementById("eye-left");
            const eyeRight = document.getElementById("eye-right");
            
            if (!eyeLeft || !eyeRight) {
                console.warn("SVG eye elements (eye-left or eye-right) not found. Eye animations disabled.");
                return;
            }

            const nose = document.getElementById("nose");
            const tip = document.getElementById("magic-tip");
            const particles = document.getElementById("magic-particles");

            const lineIds = ["rain-line1", "rain-line2", "rain-line3", "rain-line4", "rain-line5", "rain-line6", "rain-line7"];
            const lines = lineIds.map(id => document.getElementById(id)).filter(el => el != null);

            const colorline = colors; 

            let lineIndexes = lines.map((_, i) => i % colorline.length);
            // レインボーラインの色変化の速さ (400ms〜1000ms)
            let lineSpeeds = lines.map(() => 400 + Math.random() * 600); 

            const eyes = [
                { el: eyeLeft, maxOffset: 5 }, 
                { el: eyeRight, maxOffset: 5 }  
            ];

            let lookInterval = null;
            let mouseMoveTimer = null;
            const MOUSE_STOP_DELAY = 150; 
            const MAX_LOOK_OFFSET = 5; 

            
            //  2. 目の色ループロジック 
            let i = 0;
            setInterval(() => {
                eyeLeft.setAttribute("fill", colors[i]);
                eyeRight.setAttribute("fill", colors[i]);
                i = (i + 1) % colors.length;
            }, 300);

            
            // - - 3. レインボーラインの色ループロジック - - 
            
            lines.forEach((line, lineIndex) => {
                let currentIndex = lineIndexes[lineIndex];
                const speed = lineSpeeds[lineIndex];
                
                setInterval(() => {
                    line.setAttribute("stroke", colorline[currentIndex]);
                    currentIndex = (currentIndex + 1) % colorline.length;
                }, speed);
            });
            
            
            // - - 4. 目のアニメーション制御関数 - - 

            function startLookingAnimation() {
                if (lookInterval) return;

                eyes.forEach(eye => {
                    eye.el.style.transform = 'translate(0, 0)';
                });
                
                let currentPos = 0;
                let direction = 1; 
                // ステップを小さくし、動きを細かく
                const step = 0.2; 

                // 更新頻度を上げる
                lookInterval = setInterval(() => {
                    currentPos += direction * step;

                    if (currentPos >= MAX_LOOK_OFFSET) {
                        currentPos = MAX_LOOK_OFFSET;
                        direction = -1;
                    } else if (currentPos <= -MAX_LOOK_OFFSET) {
                        currentPos = -MAX_LOOK_OFFSET;
                        direction = 1;
                    }

                    eyes.forEach(eye => {
                        eye.el.style.transform = `translate(${currentPos}px, 0)`; 
                    });
                }, 20); 
            }

            function stopLookingAnimation() {
                if (lookInterval) {
                    clearInterval(lookInterval);
                    lookInterval = null;
                }
            }


            // - - 5. 実行ロジック - - 

            startLookingAnimation();

            document.addEventListener("mousemove", (e) => {
                stopLookingAnimation();

                const mouseX = e.clientX;
                const mouseY = e.clientY;

                eyes.forEach(eye => {
                    const eyeRect = eye.el.getBoundingClientRect();
                    
                    const eyeCenterX = eyeRect.left + eyeRect.width / 2;
                    const eyeCenterY = eyeRect.top + eyeRect.height / 2;

                    const angle = Math.atan2(mouseY - eyeCenterY, mouseX - eyeCenterX);
                    
                    const maxOffset = eye.maxOffset; 
                    const offsetX = Math.cos(angle) * maxOffset;
                    const offsetY = Math.sin(angle) * maxOffset;

                    eye.el.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                });

                clearTimeout(mouseMoveTimer);
                
                mouseMoveTimer = setTimeout(() => {
                    startLookingAnimation();
                }, MOUSE_STOP_DELAY);

            });
        });
        ]]>
    </script>
    </svg>