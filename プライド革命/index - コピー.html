<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KS903 PWA</title>
    <link rel="stylesheet" href="imasan_style24.css">
    <link rel="icon" href="design_icon.svg" type="image/svg+xml">
</head>
<body >
  <div id="magic-stick"></div>
  <div id="magic-tip"></div>
  <div id="magic-particles"></div>
<svg width="600" height="600" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
    <linearGradient id="rainbow-fill" class="flow-rainbow" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:red" />
        <stop offset="16.6%" style="stop-color:orange" />
        <stop offset="100%" style="stop-color:violet" />
    </linearGradient>
</defs>
     <defs>
        <linearGradient id="rainbow-fill2" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:red" />
            <stop offset="16%" style="stop-color:orange" />
            <stop offset="32%" style="stop-color:yellow" />
            <stop offset="48%" style="stop-color:green" />
            <stop offset="64%" style="stop-color:blue" />
            <stop offset="80%" style="stop-color:indigo" />
            <stop offset="100%" style="stop-color:violet" />
        </linearGradient>
    </defs>
    <defs>
    <linearGradient id="rainbow-nose" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop id="nose-stop1" offset="0%" stop-color="red" />
        <stop id="nose-stop2" offset="100%" stop-color="orange" />
    </linearGradient>
</defs>
    
    <path
        d="M 50 200 A 250 250 0 0 1 550 200"
        fill="none"
        stroke="url(#rainbow-fill2)"
        stroke-width="3"
        stroke-linecap="round"
    />
    <ellipse cx="245" cy="52" rx="15" ry="20" fill="white" stroke="" stroke-width="1.5"/>
    
    <ellipse cx="315" cy="52" rx="15" ry="20" fill="white" stroke="" stroke-width="1.5"/>
    <ellipse class="iris" id="eye-right" cx="315" cy="52" rx="5" ry="12" fill="url(#rainbow-fill)" stroke="" stroke-width="1.5">  
        <animate attributeName="ry" 
                 values="12; 12; 0.1; 12" 
                 keyTimes="0; 0.95; 0.97; 1" 
                 dur="3s" 
                 repeatCount="indefinite"/>
    </ellipse>
    <ellipse class="iris" id="eye-left" cx="245" cy="52" rx="5" ry="12" fill="url(#rainbow-fill)" stroke="" stroke-width="1.5">
    <animate attributeName="ry" 
              values="12; 12; 0.1; 12" 
              keyTimes="0; 0.95; 0.97; 1" 
              dur="3s" 
              repeatCount="indefinite"/>
</ellipse>
    <line id="rain-line1" x1="30" y1="80" x2="180" y2="110" stroke="black" stroke-width="3" />
    <line id="rain-line2" x1="30" y1="130" x2="180" y2="130" stroke="black" stroke-width="2"/>
    <line id="rain-line3" x1="30" y1="180" x2="180" y2="150" stroke="black" stroke-width="3"/> 
    <line id="rain-line4" x1="340" y1="110" x2="503" y2="80" stroke="black" stroke-width="3" />
    <line id="rain-line5" x1="340" y1="130" x2="520" y2="130" stroke="black" stroke-width="2" />
    <line id="rain-line6" x1="340" y1="150" x2="520" y2="180" stroke="black" stroke-width="3" />
    <circle id="nose" cx="280" cy="85" r="14" fill="url(#rainbow-nose)" stroke="url(#rainbow-nose)" stroke-width="2.5" />

    <text x="105" y="82" font-family="Arial, sans-serif" font-size="46" font-weight="1.5" fill="url(#rainbow-fill2)" >
           K  S -      
    </text>
 <text x="215" y="98" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-fill2)" transform="rotate(0 30 50)"> 
           9      
    </text>
    <text x="290" y="94" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-fill2)" >
            0      
    </text>
    <text x="360" y="92" font-family="Arial, sans-serif" font-size="96" font-weight="1.5" fill="url(#rainbow-fill2)" >
            3    
    </text>
    <line id="rain-line7" x1="280" y1="100" x2="280" y2="150" stroke="black" stroke-width="2" />

</svg>    
    <div style="margin-top:20px; display:flex; justify-content:center; gap:20px;">
    <img src="image/qr1.png" width="180">
    <img src="image/qr2.png" width="180">
    <img src="image/qr3.png" width="180">
</div>
<script>
const colors = [
    "red", "orange", "yellow",
    "green", "blue", "indigo", "violet"
];
let i = 0;
setInterval(() => {
    const left = document.getElementById("eye-left");
    const right = document.getElementById("eye-right");
    left.setAttribute("fill", colors[i]);
    right.setAttribute("fill", colors[i]);
    i = (i + 1) % colors.length;
}, 300);
const nose = document.getElementById("nose");
const tip = document.getElementById("magic-tip");
const particles = document.getElementById("magic-particles");
const lines = ["rain-line1","rain-line2","rain-line3","rain-line4","rain-line5","rain-line6","rain-line7"]
              .map(id => document.getElementById(id));

const colorline = ["red","orange","yellow","green","blue","indigo","violet"];
let lineIndexes = lines.map((_, i) => i % colorline.length);
let lineSpeeds = lines.map(() => 200 + Math.random() * 300);
let hoverIntervals = [];
const eyeLeft = document.getElementById("eye-left");
const eyeRight = document.getElementById("eye-right");
const eyes = [
    { el: eyeLeft, cx: 245, cy: 52 }, // 左目 (元のcx, cy)
    { el: eyeRight, cx: 315, cy: 52 }  // 右目 (元のcx, cy)
];
let lookInterval;
let mouseMoveTimer;
const MOUSE_STOP_DELAY = 150; 
function startLookingAnimation() {
    if (lookInterval) return; 
    eyes.forEach(eye => {
        eye.el.style.transform = 'translateX(0)';
    });
    let currentPos = 0;
    let direction = 1; 
    const maxLookOffset = 5; 
    const step = 0.5; 
    lookInterval = setInterval(() => {
        currentPos += direction * step;
        if (currentPos >= maxLookOffset) {
            currentPos = maxLookOffset;
            direction = -1;
        } else if (currentPos <= -maxLookOffset) {
            currentPos = -maxLookOffset;
            direction = 1;
        }
        eyes.forEach(eye => {
            eye.el.style.transform = `translateX(${currentPos}px)`;
        });
    }, 50); 
}
function stopLookingAnimation() {
    if (lookInterval) {
        clearInterval(lookInterval);
        lookInterval = null;
    }
}
startLookingAnimation();
document.addEventListener("mousemove", (e) => {
    stopLookingAnimation();
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    eyes.forEach(eye => {
        const eyeRect = eye.el.getBoundingClientRect();
        const eyeCenterX = eyeRect.left + eyeRect.width / 2;
        const eyeCenterY = eyeRect.top + eyeRect.height / 2;
        const angle = Math.atan2(mouseY - eyeCenterY, mouseX - eyeCenterX);
        const maxOffset = 5;
        const offsetX = Math.cos(angle) * maxOffset;
        const offsetY = Math.sin(angle) * maxOffset;
        eye.el.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
    });
    clearTimeout(mouseMoveTimer);
    mouseMoveTimer = setTimeout(() => {
        startLookingAnimation();
    }, MOUSE_STOP_DELAY);
});
nose.addEventListener("mouseenter", () => {
nose.style.animationDuration = "2s";
nose.classList.add("rainbow-flow");
tip.classList.add("hidden");
const allParticles = document.querySelectorAll("#magic-particles .particle");
    allParticles.forEach(p => p.classList.add("hidden-particle"));
    const cx = nose.cx.baseVal.value;
    const cy = nose.cy.baseVal.value;    
    lines.forEach(line => line.setAttribute("visibility","visible"));
    if(hoverIntervals.length) return; 
    lines.forEach((line, i) => {
    const interval = setInterval(() => {
      line.setAttribute("stroke", colorline[lineIndexes[i]]);
      lineIndexes[i] = (lineIndexes[i] + 1) % colorline.length;
    }, lineSpeeds[i]);
    hoverIntervals.push(interval);
  }, 100);
particles.forEach(p => p.classList.add("hidden"));
});
nose.addEventListener("mouseleave", () => {
  nose.classList.remove("rainbow-flow");
  tip.classList.remove("hidden");
  const allParticles = document.querySelectorAll("#magic-particles .particle");
    allParticles.forEach(p => p.classList.remove("hidden-particle"));
     lines.forEach(line => line.setAttribute("stroke", "black"));
     hoverIntervals.forEach(interval => clearInterval(interval));
    hoverIntervals = [];
});
let angle = 0;
const radius = 18;
document.addEventListener("mousemove", (e) => {
    const stick = document.getElementById("magic-stick");
    const stickX = e.pageX - 140;
    const stickY = e.pageY - 10;
    stick.style.left = stickX + "px";
    stick.style.top  = stickY + "px";
    window.tipBaseX = stickX + 140;
    window.tipBaseY = stickY + 6;
});
setInterval(() => {
    const tip = document.getElementById("magic-tip");
    const particles = document.querySelectorAll(".magic-particle2");  
    if (!window.tipBaseX) return;
    angle += 0.1;
    const x = window.tipBaseX + Math.cos(angle) * radius;
    const y = window.tipBaseY + Math.sin(angle) * radius;
    tip.style.left = x + "px";
    tip.style.top  = y + "px";
    spawnParticle(x, y);
}, 16);
function spawnParticle(x, y) {
    const container = document.getElementById("magic-particles");
    const particle = document.createElement("div");
    particle.className = "particle";
    const angle = Math.random() * 2 * Math.PI;
    const speed = Math.random() * 2 + 1;
    particle.style.left = x + "px";
    particle.style.top  = y + "px";
    particle.style.setProperty("--dx", Math.cos(angle) * speed + "px");
    particle.style.setProperty("--dy", Math.sin(angle) * speed + "px");
    container.appendChild(particle);
    setTimeout(() => particle.remove(), 1000);
}
</script>

        <h1>KS903 PWA</h1>
<p>Android/iOS両方でQRからアクセス可能。アプリっぽく使えます。</p>
</body>
</html>